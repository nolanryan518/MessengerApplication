<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title> The Best Messenger Ever </title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
    <script src="/node_modules/angular/angular.js"></script>
    <script>
        var socketio = io();
        var typing = false;
        var timeout = undefined;
        const isVisible = elem => !!elem && !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length)
        // $(document).ready(function () {
        //     //prevent page reload on post request
        //     $('body').on('submit', '#uploadForm', function (event) {
        //         event.preventDefault();
        //         $.ajax({
        //             type: 'POST',
        //             url: '/',
        //             dataType: "application/json; charset=utf-8",
        //             contentType: JSON.stringify(false),
        //             success: function (response) {
        //                 $("#errorMessage").html("* file successfully opened");
        //                 console.log('successfully uploaded', response);
        //             },
        //             error: function (result) {
        //                 $("#errorMessage").html("* Incorrect file/no file given");
        //                 console.log('coudn\'t upload');
        //             }
        //         });
        //        // return false;
        //     })
        // });
        $(document).ready(function () {
            //prevent page reload on post request
            $('#uploadForm').submit(function () {
                $("#status").empty().text("File is uploading...");
                $(this).ajaxSubmit({
                    error: function (xhr) {
                        status('Error: ' + xhr.status);
                    },
                    success: function (response) {
                        $("#status").empty().text(response);
                    }
                });
                return false;
            });
        });
        $(document).ready(function () {
            //prevent page reload on post request
            $('body').on('submit', '#uploadForm2', function (event) {
                event.preventDefault();
                $.ajax({
                    type: 'POST',
                    url: '/',
                    dataType: "application/json; charset=utf-8",
                    contentType: JSON.stringify(false),
                    success: function (response) {
                        $("#errorMessage").html("* file successfully opened");
                        console.log('successfully uploaded', response);
                    },
                    error: function (result) {
                        $("#errorMessage").html("* Incorrect file/no file given");
                        console.log('coudn\'t upload');
                    }
                });
                //return false;
            })
        });
        var loadFile = function (event) {
            var image = document.getElementById('serverimage');
            image.src = URL.createObjectURL(event.target.files[0]);
            changeImage();
        }
        var loadProfileFile = function (event) {
            var image = document.getElementById("profileImage");
            image.src = URL.createObjectURL(event.target.files[0]);
            changeProfileImage();
        }

        function changeProfileImage() {
            var imageSource = document.getElementById("profileImage").src;
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = ".uploadButtonProfile" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += ".uploadButtonProfile" + "{background-size: cover;}";
        }

        function changeImage() {
            var imageSource = document.getElementById("serverimage").src;
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = ".uploadButton" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += ".uploadButton" + "{background-size: cover;}";
        }

        function setImage() {
            //$('.uploadButton').css("background-image", "image/test2.png");
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = ".uploadButton" + "{background: url(image/test2.png);}";
            styleElem.innerHTML += ".uploadButton" + "{background-size: cover;}";
        }

        function clearnewUsername() {
            $('#profileText').val("");
        }

        function showRegistrationModal() {
            $('#registerModal').show();
        }

        function closeRegistrationModal() {
            $("#registerModal").hide();
            $("#registerSuccess").hide();
            $("#registerError").hide();
        }
        window.addEventListener('click', function (e) {
            if (!document.getElementById("profileForm").contains(e.target)) {
                var profileForm = document.getElementById("profileForm");
                if ($('#profileForm:visible').length != 0 && !$(e.target).hasClass('userButton')) {
                    if ($('#inviteServerForm:visible').length != 0) {
                        $('#inviteServerForm').hide();
                    }
                    $('#profileForm').hide();
                } else if (!document.getElementById("notificationForm").contains(e.target)) {
                    if ($('#notificationForm:visible').length != 0 && !$(e.target).hasClass('notificationMenuButton')) {
                        $('#notificationForm').hide();
                    }
                }
            }
        });
        socketio.on("welcome", (welcomemessage) => {
            document.getElementById('messages').innerHTML += welcomemessage + "<br>";
        });
        socketio.on("chat_history", ({
            chat_history, div
        }) => {
            if (chat_history && chat_history.length > 0) {
                for (let index in chat_history) {
                    let user = chat_history[index].receiver
                    let chatmessage = chat_history[index].message
                    // let time = new Date(chat_history[index].timestamp)
                    document.getElementById(div).innerHTML+= user + " " + chatmessage + "<br>";
                }
            }
        });
        socketio.on("showprofile", ({
            username, theImage
        }) => {
            var button = document.createElement("button");
            var profileImage = document.createElement("button");
            profileImage.id = "x";
            profileImage.className = "profile";
            profileImage.classList.add("userProfileButton");
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = '.' + 'profile' + ':before' + '{background: url(' + theImage + ');}';
            styleElem.innerHTML += '.' + 'profile' + ':before' + '{background-size: cover;}';
            document.getElementById("userProfileUsername").appendChild(profileImage);
            button.addEventListener("click", showProfileSettings, false);
            button.id = "userProfile";
            button.className = "profileUser";
            button.classList.add("userProfileButtonBottom");
            var theuser = document.getElementById("theuser");
            theuser.appendChild(button);
            $('.profileUser').attr('user-after', username);
            // var x = document.getElementById("x");
            // x.style.backgroundImage = "url('" + imgSource + "')";
            // x.style.backgrounSize = "cover";
        });
        socketio.on("chat", ({
            chatmessage, div, profileImage, username, msgID
        }) => {
            var id = msgID;
            var button = document.createElement("button");
            button.id = msgID;
            button.className = "message" + id;
            button.textContent = chatmessage;
            document.getElementById(div).appendChild(button);
            button.classList.add("chatMessageButton");
            // $('.' + username).attr('username-after', username);
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + "message" + id + ":before" + "{background: url(" + profileImage + ");}";
            styleElem.innerHTML += "." + "message" + id + ":before" + "{background-size: cover;}";
            $('.' + "message" + id).attr('usernameChat-after', username);
            //document.getElementById(div).innerHTML += chatmessage + "<br>";
        });
        socketio.on("userlist", ({
            username,
            count,
            div,
            imageSource
        }) => {
            if (count == 0) {
                const myNode = document.getElementById(div);
                myNode.innerHTML = '';
            }
            var button = document.createElement("button");
            button.addEventListener("click", showUserOptions, false);
            button.id = username;
            button.className = username;
            // button.textContent = username;
            document.getElementById(div).appendChild(button);
            linebreak = document.createElement("br");
            document.getElementById(div).appendChild(linebreak);
            var theUserButton = document.getElementById(username);
            theUserButton.classList.add("userButton");
            // $('.' + username).attr('username-after', username);
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + username + ":before" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += "." + username + ":before" + "{background-size: cover;}";
            $('.' + username).attr('theUsername-after', username);

        });
        socketio.on("dc", (message) => {
            document.getElementById('messages').innerHTML += message + "<br>";
        });
        socketio.on("<TYPING>", (msg) => {
            document.getElementById('typing').innerHTML += msg + " is typing" + "<br>";
        });
        socketio.on("done", (msg) => {
            const myNode = document.getElementById('typing');
            myNode.innerHTML = '';
        });
        socketio.on("useradded", () => { });
        socketio.on("authenticated", () => {
            sucLogin();
            addUser();
            document.getElementById("createserver").style.display = "block";
            document.getElementById("servers").style.display = "block";
            document.getElementById("publicChat").style.display = "block";
            setServerName();
        });
        socketio.on("registration", (result) => {
            var username = document.getElementById('newusername').value;
            if (result === "Success") {
                $('#registerError').hide();
                $('#registerSuccess').show();
                hideRegistrationScreen();
                showLoginScreen();
                return;
            }
            if (result === "UserExist") {
                $('#registerSuccess').hide();
                $("#registerError").show();
            }
            document.getElementById('newusername').value = "";
            document.getElementById('newpassword').value = "";
            document.getElementById('newusername').focus();
        });
        socketio.on("FailedLogin", (checklogin_result) => {
            if (checklogin_result === false) alert("FailedLogin. Please try again!");
        });

        function showRegistrationScreen() {
            var registrationScreen = document.getElementById("registrationScreen");
            registrationScreen.style.display = "block";
        }

        function hideRegistrationScreen() {
            var registrationScreen = document.getElementById("registrationScreen");
            registrationScreen.style.display = "none";
        }

        function register() {
            var username = document.getElementById('newusername').value;
            var password = document.getElementById('newpassword').value;
            socketio.emit("register", username, password);
        }
        socketio.on("addserver", ({
            theName, theID, imageSource
        }) => {
            var button = document.createElement("button");
            //alert(imageSource);
            button.addEventListener("click", enterServer, false);
            button.theID = theID;
            //var temp=URL.createObjectURL(imageSource);
            var servers = document.getElementById("servers");
            button.id = theID;
            button.className = "serverButton" + theID;
            button.classList.add("serverButton");
            var styleElem = document.head.appendChild(document.createElement("style"));
            servers.appendChild(button);
            if (theID == 0) {
                $('.' + 'serverButton' + theID).attr('data-after', 'Public Chat');
            }
            if (theID != 0) {
                styleElem.innerHTML = "." + "serverButton" + theID + "{background: url(" + imageSource + ");}";
                styleElem.innerHTML += "." + "serverButton" + theID + "{background-size: cover;}";
                styleElem.innerHTML += "." + "serverButton" + theID + "background-position: center center ;}";
                $('.' + 'serverButton' + theID).attr('data-after', theName);
            }
        });
        socketio.on("launchdirectChat", (id) => {
            enterDirect(id);
        });
        socketio.on("removebutton", (number)=>{
            $('#'+number).hide()
        });

        function enterDirect() {
            var theID = arguments[0];
            const myNode = document.getElementById('privatechat');
            $('#inviteButton').hide();
            myNode.innerHTML = '';
            if (theID != 0) {
                hidePublicChat();
                showPrivateUI();
                hideCreateServer();
            }
            socketio.emit("getservername", theID);
            socketio.emit("enterserver", theID);
        }

        function enterServer(theID) {
            var serverID = theID.currentTarget.theID;
            const myNode = document.getElementById('privatechat');
            myNode.innerHTML = '';
            if (theID != 0) {
                hidePublicChat();
                showPrivateUI();
                hideCreateServer();
                $('#inviteButton').show();
            }
            socketio.emit("getservername", serverID);
            socketio.emit("enterserver", serverID);
        }
        socketio.on("displayServerName", (name) => {
            var displayServer = document.getElementById("displayServerName");
            const node = document.getElementById("displayServerName");
            node.innerHTML = '';
            displayServer.innerHTML = name;
        });
        socketio.on("enterpublic", () => {
            hidePrivateUI();
            showPublicChat();
            showUserPrint();
            showUserList();
            showServers();
            showCreateServer();
            $('#inviteButton').hide();

            document.getElementById("notifications").style.display = "block";
            document.getElementById("disconnect").style.display = "block";
        });

        function sendInviteToUser(user) {
            var param = user.currentTarget.theUser;
            socketio.emit("sendinvite", param);
        }

        function login() {
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            if (socketio) socketio.emit("login", {
                username: username,
                password: password
            });
        }

        function sendmessage() {
            socketio.emit("chat", document.getElementById('message').value);
            document.getElementById('message').value = "";
        }

        function sendTyping() {
            if (typing == false) {
                typing = true;
                var message = "is typing";
                socketio.emit("<TYPE>", message);
                timeout = setTimeout(timeoutFunction, 500);
            } else {
                clearTimeout(timeout);
                timeout = setTimeout(timeoutFunction, 500);
            }
        }

        function timeoutFunction() {
            typing = false;
            var username = document.getElementById('username').value;
            var doneTyping = username + " is done typing ";
            socketio.emit("donetyping", doneTyping);
        }

        function addUser() {
            socketio.emit("userlist", document.getElementById('username').value);
        }

        function sucLogin() {
            hideLoginScreen();
            document.getElementById("disconnect").style.display = "block";
            document.getElementById("successLogin").style.display = "block";
            document.getElementById("displayServerName").innerHTML = "Public Chat";
            showUserList();
            showUserPrint();
            document.getElementById("notifications").style.display = "block";
            document.getElementById("discordApp").style.display = "block";
        }
        socketio.on("clearsuclogin", () => {
            const myNode = document.getElementById('theuser');
            myNode.innerHTML = '';
            document.getElementById("theuser").innerHTML += document.getElementById('username').value;
        });

        function disconnect() {
            socketio.emit("userdisconnected");
            document.getElementById("discordApp").style.display = "none";
            showLoginScreen();
        }

        function showlogoutModal() {
            $("#logoutModal").show();
        }

        function hidelogoutModal() {
            $("#logoutModal").hide();
        }

        function newServer() {
            var modal = document.getElementById("serverModal");
            modal.style.display = "block";
            var span = document.getElementsByClassName("close")[0];
            span.onclick = function () {
                modal.style.display = "none";
                setServerName();
                setImage();
            }
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                    setServerName();
                    setImage();
                }
            }
        }

        function setServerName() {
            socketio.emit("getservernumber");
        }
        socketio.on("servernumber", (number) => {
            var username = document.getElementById("username").value;
            document.getElementsByName("serverTextBox")[0].value = "";
            document.getElementsByName("serverTextBox")[0].value = username + "'s server";
        });

        function showuserProfile() {
            var modal = document.getElementById("profileModal");
            modal.style.display = "block";
            var span = document.getElementsByClassName("close")[0];
            span.onclick = function () {
                modal.style.display = "none";
            }
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
            socketio.emit("getprofileinformation");
            document.getElementById("profileForm").style.display = "none";
        }
        socketio.on("profileinfo", ({
            username, imageSource
        }) => {
            // alert(imageSource);
            const myNode = document.getElementById("profileInformation");
            myNode.innerHTML = '';
            var button = document.createElement("button");
            button.id = username + "profile";
            button.className = username + "profile";
            //button.textContent = username;
            document.getElementById("profileInformation").appendChild(button);
            // var theUserButton = document.getElementById(username +"profile");
            button.classList.add("userButtonProfile");
            $("." + username + "profile").attr('username-after', username);
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + username + "profile" + ":before" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += "." + username + "profile" + ":before" + "{background-size: cover;}";
            socketio.emit("getmutualservers")
        });
        socketio.on("displaymutual", ({
            serverName, imageSource, count
        }) => {
            if (count == 0) {
                const myNode = document.getElementById("mutualServers");
                myNode.innerHTML = '';
            }
            $('#toggleMutual').hide();
            var button = document.createElement("button");
            button.id = serverName + "mutual";
            button.className = serverName + "mutual";
            //button.textContent = username;
            document.getElementById("mutualServers").appendChild(button);
            // var theUserButton = document.getElementById(username +"profile");
            button.classList.add("userButtonProfile");
            $("." + serverName + "mutual").attr('username-after', serverName);
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + serverName + "mutual" + ":before" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += "." + serverName + "mutual" + ":before" + "{background-size: cover;}";
            styleElem.innerHTML += "." + serverName + "mutual" + "{background-color: #333333;}";
            styleElem.innerHTML += "." + serverName + "mutual" + "{border: none;}";
            styleElem.innerHTML += "." + serverName + "mutual" + ":after" + "{background-color: #333333;}";
        });
        socketio.on("nocommon", () => {
            $('#toggleMutual').show();
        });

        function closeServerPopup() {
            document.getElementById("profileForm").style.display = "none";
        }

        function launchServer() {
            document.getElementById("chat").style.display = "block";
            var username = document.getElementById('username').value;
            var serverName = document.getElementById("serverText").value;
            var imageSource = document.getElementById("serverimage").getAttribute("src");
            socketio.emit("createServer", {
                username: username,
                theServerName: serverName,
                imageSrc: imageSource
            });
            hidePublicChat();
            showPrivateUI();
            showUserPrint();
            showUserList();
            document.getElementById("serverModal").style.display = "none";
            var username = document.getElementById('username').value;
            const myNode = document.getElementById('privatemembers');
            myNode.innerHTML = '';
            socketio.emit("enterserver", -1);
            setServerName();
            setImage();
        }
        socketio.on("createserverfail", () => {
            $('#serverError').show();
        });

        function hideServerError() {
            $('#serverError').hide();
        }

        function applyChanges() {
            var source = document.getElementById("profileImage").src;
            if ($('#profileText').val().length === 0) {
                socketio.emit("changeSettings", {
                    username: 0,
                    imgSource: source
                });
            } else {
                var username = $('#profileText').val();
                socketio.emit("changeSettings", {
                    username: username,
                    imgSource: source
                });
            }
            $('#profileText').val("");
            document.getElementById("profileSettings").style.display = "none";
            clearnewUsername();
        }
        socketio.on("updateUser", ({
            username, imgSource
        }) => {
            var userButton = document.getElementById("userProfile");
            //$("#userProfileUsername").empty();
            var user = document.getElementById(username);
            userButton.style.backgroundImage = "url('" + imgSource + "')";
            userButton.style.backgrounSize = "cover";
            $('.profile').attr('user-after', username);
            //document.getElementById("userProfileUsername").appendChild(userButton);
            // const myNode = document.getElementById('userProfileUsername');
            // myNode.innerHTML = '';
            var x = document.getElementById("x");
            x.style.backgroundImage = "url('" + imgSource + "')";
            x.style.backgrounSize = "cover";
        });
        socketio.on("updatechats", ({
            username, imageSource
        }) => {
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + username + "direct" + ":before" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += "." + username + "direct" + ":before" + "{background-size: cover;}";
        });

        function showNotificationMenu() {
            document.getElementById("notificationForm").style.display = "block";
        }
        //function searchUsers() {
        //    $('#searchModal').show();
        //    var modal = document.getElementById("searchModal");
        //    window.onclick = function (event) {
        //        if (event.target == modal) {
        //            modal.style.display = "none";
        //        }
        //    }
        //    socketio.emit("getusersforsearch");
        //}
        socketio.on("showusersearch", ({ username, imageSource, count }) => {
            if (count == 0) {
                const node = document.getElementById("users");
                node.innerHTML = '';
            } 
            var button = document.createElement("button");
            button.id = username + "search";
            button.className = username + "search";
            button.addEventListener('click', selectSearch, false);
            //button.textContent = username;
            document.getElementById("users").appendChild(button);
            // var theUserButton = document.getElementById(username +"profile");
            button.classList.add("userSearch");
            $("." + username + "search").attr('userSearch-after', username);
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + username + "search" + ":before" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += "." + username + "search" + ":before" + "{background-size: cover;}";
        });
        function selectSearch() {
            var styleElem = document.head.appendChild(document.createElement("style"));
            socketio.emit("sendinvite", this.id);
            // var theHide=document.getElementById(this.id);
            // theHide.style.display="none";
            styleElem.innerHTML = "." + this.id + "{border: 1px solid rgb(60, 150, 60);}";
            styleElem.innerHTML = "." + this.id + "{background-color:  #1f1f1f;}";
            styleElem.innerHTML += "." + this.id + ":after" + "{background-color: #1f1f1f;}";
        }

        function showServerInvite() {
            //don't bog server with requests unless needed
            if ($('#inviteServerForm:visible').length == 0) {
                socketio.emit("servers");
            }
        }
        socketio.on("serverNumber", (number) => {
            if (number > 0) {
                document.getElementById("inviteServerForm").style.display = "block";
                var username = document.getElementById("username").value;
                //alert("yes");
                socketio.emit("getinviteServers");
            }
        });
            socketio.on("displayinviteServer", ({ theID, serverName, serverImage }) => {
            var servers = document.getElementById("inviteServerForm");
            var button = document.createElement("button");
            button.addEventListener("click", sendServerInvite, false);
            button.addEventListener('mouseover', changeBackground, false);
            button.addEventListener('mouseout', changeBackgroundback, false);
            button.id = serverName;
            button.className = "class" +theID;
            button.theID=theID;
            // button.textContent = serverName;
            button.classList.add("inviteServer-button");
            // rgb(29, 81, 194)
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + serverName + ":before" + "{background: url(" + serverImage + ");}";
            styleElem.innerHTML += "." + serverName + ":before" + "{background-size: cover;}";
            servers.appendChild(button);
            $('.' + "class" +theID).attr('servername-after', serverName);
        });
           function changeBackground(theID){
            var id=theID.currentTarget.theID;
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + "class" +id + ":after" + "{background-color:  rgb(29, 81, 194);}";
        }
        function changeBackgroundback(theID){
            var id=theID.currentTarget.theID;
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + "class" +id + ":after" + "{background-color:  black}";
        }
        //removes server (that user is already apart of) from invite menu
        socketio.on("removeserver", (serverName) => {
            $('#' + serverName).hide();
            var number = $("#inviteServerForm").children().length;
            var numNotVisibile = 0;
            $("#inviteServerForm").children().each(function (index) {
                if ($('#' + this.id).css("display") == "none") {
                    numNotVisibile++;
                }
            });
            if (numNotVisibile == number - 1) {
                $("#inviteServerForm").hide();
            }
        });

        function sendServerInvite() {
            var theServer = this.id;
            socketio.emit("sendInvite", theServer);
        }

        function startDirectMessage() {
            socketio.emit("getSelectedUser");
        }
        socketio.on("returnSelectedUser", (username) => {
            socketio.emit("createDirectMessage", username);
        });
        socketio.on("makeDirectChat", ({ username, profileImage, serverID }) => {
            var directMessage = document.getElementById("directmessages");
            var button = document.createElement("button");
            button.id = serverID;
            button.addEventListener("click", enterServer, false);
            button.theID = serverID;
            button.id = serverID;
            button.className = "direct" + username;
            button.classList.add("directChatButton");
            // button.textContent = username;
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + "direct" + username + ":before" + "{background: url(" + profileImage + ");}";
            styleElem.innerHTML += "." + "direct" + username + ":before" + "{background-size: cover;}";
            directMessage.appendChild(button);
            $('.' + 'direct' + username).attr('directname-after', username);
            //$('.' +'direct' +username).attr('directname-after', username);
            // button.textContent = username;

        });
        socketio.on("showInvite", ({
            username, theImage, theID
        }) => {
            if ($("#notificationStatus").css("display") == "block") {
                $("#notificationStatus").hide();
            }
            $('.notificationMenuButton').css('background-color', 'green');
            var notifications = document.getElementById("notification");
            var button = document.createElement("button");
            button.id = theID + "invitation" + username;
            button.addEventListener("click", acceptInvitation, false);
            button.addEventListener("contextmenu", hideNotification, false);
            button.textContent = "Server Invite from " + username;
            button.className = username + "invitation";
            button.classList.add("notificationButton");
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + username + "invitation" + ":before" + "{background: url(" + theImage + ");}";
            styleElem.innerHTML += "." + username + "invitation" + ":before" + "{background-size: cover;}";
            notifications.appendChild(button);
        });

        function hideNotification(e) {
            e.preventDefault();
            document.getElementById(this.id).style.display = "none";
            var notificationNumber = $("#notification").children().length;
            var numNotVisibile = 0;
            //if number not visible elements=number of elements in div, show "You're all caught up"
            $("#notification").children().each(function (index) {
                if ($('#' + this.id).css("display") == "none") {
                    numNotVisibile++;
                }
            });
            if (numNotVisibile == notificationNumber) {
                $("#notificationStatus").show();
                $('.notificationMenuButton').css('background-color', 'red');
            }
        }

        function acceptInvitation(id) {
            var serverID = id.currentTarget.id;
            document.getElementById(serverID).style.display = "none";
            var notificationNumber = $("#notification").children().length;
            var numNotVisibile = 0;
            $("#notification").children().each(function (index) {
                if ($('#' + this.id).css("display") != "block") {
                    numNotVisibile++;
                }
            });
            if (numNotVisibile == notificationNumber) {
                $("#notificationStatus").show();
                $('.notificationMenuButton').css('background-color', 'red');
            }
            socketio.emit("acceptinvitation", {
                theID: serverID,
                member: document.getElementById("username").value
            });
        }

        function showUserOptions() {
            socketio.emit("setuser", this.id);
        }
        //if clicked user is self, don't show regular settings (kick, block user, invite to server, etc)
        //just creating another div is also possible
        socketio.on("userself", () => {
            document.getElementById("profileForm").style.display = "block";
            $('#messageUser').hide();
            $('#inviteToServer').hide();
            $('#blockButton').hide();
            $('#kickUser').hide();
        });
        //reshow these options when other user is selected
        socketio.on("reshowoptions", () => {
            document.getElementById("profileForm").style.display = "block";
            $('#messageUser').show();
            $('#inviteToServer').show();
            $('#blockButton').show();
            $('#kickUser').show();
        });
        //========Kicking User===========
        socketio.on("kicktoggle", (num) => {
            if (num == 0) {
                $('#kickUser').hide();
            } else {
                $('#kickUser').show();
            }
        });

        function showKickModal() {
            $('#kickModal').show();
            var modal = document.getElementById("kickModal");
            var span = document.getElementsByClassName("close")[0];
            span.onclick = function () {
                modal.style.display = "none";
            }
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

        function hideKicKModal() {
            $('#kickModal').hide();
        }

        function hideServerModal() {
            $('#serverModal').hide();
            setServerName();
            setImage();
        }

        function hideKickReasonModal() {
            $('#kickReasonModal').hide();
        }

        function kickUser() {
            $('#kickModal').hide();
            var reason = document.getElementById("kickReason").value;
            // var reason=$('#kickReason').value;
            socketio.emit("kickuser", reason);
        }
        socketio.on("userkicked", ({
            theReason, serverName, username
        }) => {
            $('#notificationStatus').hide();
            $('.notificationMenuButton').css('background-color', 'green');
            var notifications = document.getElementById("notification");
            var button = document.createElement("button");
            button.id = serverName + "kicked";
            button.theReason = theReason;
            button.addEventListener("click", showReason, false);
            button.addEventListener("contextmenu", hideNotification, false);
            button.textContent = username + " kicked you from " + serverName;
            button.className = username + "invitation";
            button.classList.add("notificationButton");
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + username + "invitation" + ":before" + "{background: url(image/redX.png);}";
            styleElem.innerHTML += "." + username + "invitation" + ":before" + "{background-size: cover;}";
            notifications.appendChild(button);
        });

        function showReason(theReason) {
            var reason = theReason.currentTarget.theReason;
            $(this.id).hide();
            $('#kickReasonModal').show();
            $('.notificationMenuButton').css('background-color', 'red');
            $('#notificationForm').hide();
            $('#kickReasonShow').val(reason);
        }

        function hideKickReasonModal() {
            $('#kickReasonModal').hide();
        }
        //========End Kick===========
        function blockUser() {
            var button = document.getElementById("blockButton");
            if (button.textContent.localeCompare("Unblock") != 0) {
                $('#blockModal').show();
                socketio.emit("getselected");
            } else {
                button.textContent = "Block";
                socketio.emit("unblockuser")
            }
        }
        socketio.on("returnForBlock", (selectedUser) => {
            const node = document.getElementById("blockUsername");
            node.innerHTML = '';
            document.getElementById('blockUsername').innerHTML = "Block " + selectedUser + "?";
        });
        socketio.on("youareblocked", (username) => {
            $('#blockedDialog').show();
        });

        function hideBlockModal() {
            $('#blockModal').hide();
        }

        function hideblockedDialog() {
            $('#blockedDialog').hide();
        }

        function blocktheUser() {
            $('#blockModal').hide();
            socketio.emit("blockuser");
        }
        socketio.on("blocked", (blocked) => {
            var blockbutton = document.getElementById("blockButton");
            if (blocked == 0) {
                blockbutton.textContent = "Unblock";
            }
            if (blocked == 1) {
                blockbutton.textContent = "Block";
            }
        });

        function searchKeyPress(e) {
            if (e.keyCode == 13) {
                sendmessage();
            }
        }

        function hideProfileModal() {
            $("#profileSettings").hide();
            clearnewUsername();
        }

        function searchUsers() {
            const node = document.getElementById("users");
            node.innerHTML = '';
            $('#searchModal').show();
            var modal = document.getElementById("searchModal");
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
            socketio.emit("getusersforsearch");
        }

        socketio.on("showusersearch", ({
            username, imageSource, count
        }) => {
            if (count == 0) {
                const node = document.getElementById("users");
                node.innerHTML = '';
            }
            var button = document.createElement("button");
            button.id = username + "search";
            button.className = username + "search";
            button.addEventListener('click', selectSearch, false);
            //button.textContent = username;
            document.getElementById("users").appendChild(button);
            // var theUserButton = document.getElementById(username +"profile");
            button.classList.add("userSearch");
            $("." + username + "search").attr('username-after', username);
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + username + "search" + ":before" + "{background: url(" + imageSource + ");}";
            styleElem.innerHTML += "." + username + "search" + ":before" + "{background-size: cover;}";
            styleElem.innerHTML += "." + username + "search" + "{background-color: #333333;}";
            styleElem.innerHTML += "." + username + "search" + "{border: none;}";
            styleElem.innerHTML += "." + username + "search" + ":after" + "{background-color: #333333;}";
        });

        function selectSearch() {
            var styleElem = document.head.appendChild(document.createElement("style"));
            styleElem.innerHTML = "." + this.id + "{background-color: #262626;}";
            // styleElem.innerHTML = "." + this.id + ":after"+ "{background: #262626;}";
        }

        function hideSearchModal() { }

        function showLoginScreen() {
            document.getElementById("loginUI").style.display = "block";
        }

        function hideLoginScreen() {
            document.getElementById("loginUI").style.display = "none";
        }

        function showCreateServer() {
            document.getElementById("createserver").style.display = "block";
        }

        function hideCreateServer() {
            document.getElementById("createserver").style.display = "none";
        }

        function showServers() {
            document.getElementById("servers").style.display = "block";
        }

        function hideServers() {
            document.getElementById("servers").style.display = "none";
        }

        function showPrivateUI() {
            document.getElementById("privateUI").style.display = "block";
        }

        function hidePrivateUI() {
            document.getElementById("privateUI").style.display = "none";
        }

        function showPublicChat() {
            document.getElementById("publicChat").style.display = "block";
        }

        function showPrivateChatUI() {
            const myNode = document.getElementById('chatUI');
            myNode.innerHTML = '';
        }

        function hidePublicChat() {
            document.getElementById("publicChat").style.display = "none";
        }

        function hideUserPrint() {
            document.getElementById("userPrint").style.display = "none";
        }

        function showUserPrint() {
            document.getElementById("userPrint").style.display = "block";
        }

        function showUserList() {
            document.getElementById("userList").style.display = "block";
        }

        function hideUserList() {
            document.getElementById("userList").style.display = "none";
        }

        function showAddMembers() {
            document.getElementById("addmembers").style.display = "block";
        }

        function hideAddMembers() {
            document.getElementById("addmembers").style.display = "none";
        }

        function showProfileSettings() {
            var modal = document.getElementById("profileSettings");
            modal.style.display = "block";
            var span = document.getElementsByClassName("close")[0];
            span.onclick = function () {
                modal.style.display = "none";
                clearnewUsername();
            }
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                    clearnewUsername();
                }
            }
        }

        function showNicknameModal() {
            $('#nicknameModal').show();
            $('#profileForm').hide();
        }

        function showKickReasonModal() {
            $('#blockModal').show();
        }
        function HelpFunction() {
            var x = document.getElementById("Help");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }

        h1 {
            text-align: center;
        }

        .discordApp {
            width: 100vw;
            height: 100vh;
            display: flex;
            background: #333333;
        }

        .serverSelector {
            position: fixed;
            height: 100%;
            width: 100px;
            background: #1b1b1b;
            z-index:1;
        }

        .serverName {
            position: fixed;
            height: 50px;
            width: calc(100vw - 100px);
            left: 100px;
            background-color: #333333;
            border-bottom: 1px solid black;
            z-index: 1;
        }

        .directMessagesDiv {
            position: fixed;
            height: 90%;
            top: 5%;
            width: 300px;
            left: 100px;
            bottom: 5%;
            background: #262626;
        }

        .botArea {
            position: fixed;
            height: 50px;
            top: 95%;
            width: 300px;
            left: 100px;
            background: #1f1f1f;
        }

        .rightColumn {
            position: fixed;
            flex: 0 0 300px;
            height: 100%;
            width: 300px;
            right: 0%;
            background: #262626;
            z-index: 0;
        }

        .disconnect {
            position: absolute;
            background: red;
            color: white;
            border: none;
            bottom: 2%;
            height: 5%;
            right: 15%;
            width: 70%;
        }

        .disconnect:hover {
            filter: brightness(0.5);
            text-decoration: underline;
        }

        .disconnect:focus {
            outline: none;
        }

        .middleArea {
            flex: auto;
            width: 60vw;
            right: 450px;
            background-color: #333333;
        }

        .inputsend {
            position: absolute;
            float: left;
            background: #4d4d4d;
            border-radius: 8px;
            bottom: 2%;
            width: calc(100vw - 800px);
            padding: 5px;
            height: 50px;
            right: 450px;
            left: 450px;
            resize: both;
            overflow: hidden;
            color:white;
        }

        .textarea {
            display: block;
            width: 100%;
            overflow: hidden;
            resize: both;
            min-height: 40px;
            line-height: 20px;
        }

        .inputsend:focus {
            outline: none;
        }

        .chat {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .row:after {
            content: "";
            display: table;
            clear: both;
        }

        .searchModal-head {
            color: white;
            align-items: center;
            padding: 10px;
            font-size: 20px;
        }

        .searchModal-content {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #1b1b1b;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            /* max-width: 500px;
            height: 500px; */
            height: 65%;
            width: 20%;
            display: block;
            border-radius: 5px;
            /* border:10px solid black; */
            /* border-color:rgb(29, 179, 29) */
        }

        .searchModal-body {
            padding: 20px;

        }

        .searchModal-list {
            width: auto;
            overflow-y: auto;
            word-wrap: break-word;
            max-height: 40vh;
        }

        .searchModal-footer {
            position: absolute;
            bottom: 0;
            border: 1px solid black;
            width: auto;
            height: 15%;
            width: 100%;
        }

        .searchModal-text {
            color: white;
            font-size: 14px;
        }

        .searchModal-button {
            position: relative;
            justify-content: center;
            border-radius: 8px;
            border: none;
            margin-left: 20%;
            margin-top: 20px;
            width: 200px;
            height: 50px;
            background-color: rgb(60, 150, 60);
            color: white;
        }

        .searchModal-button:hover {
            filter: brightness(0.5)
        }

        .searchModal-button:focus {
            outline: none;
        }

        .successLogin {
            position: relative;
            bottom: 0;
            left: 0;
            text-align: center;
        }

        body {
            font-family: 'Open Sans';
            padding: 0;
            margin: 0;
            color: #C2C2C2;
            background: #a6a6a6;
        }

        .loginUI {
            position: absolute;
            display: block;
            top: 0;
            background-color: #333333;
            height: 100%;
            width: 100%;
            padding: 25px 0;
            text-align: center;
        }

        .loginarea {
            display: block;
            border: 1px solid black;
            position: absolute;
            border-radius: 8px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            height: auto;
            min-height: 50vh;
            background: #262626;
        }

        .loginarea .loginButton {
            color: white;
            position: relative;
            border-radius: 8px;
            top: 0;
            margin-top: 30px;
            width: 50%;
            left: 25%;
            height: 50px;
            background-color: #295ff3;
        }

        .loginarea .loginTextBox {
            border: 1px solid black;
            position: relative;
            width: 50%;
            height: 50px;
            font-size: 22px;
            border-radius: 8px;
            color: white;
            background-color: #1f1f1f;
            margin-top: 5px;
            margin-bottom: 5px;
            margin-left: 25%;
        }

        .loginarea .loginTextLarge {
            margin-top: 20px;
            font-size: 20px;
            color: white;
        }

        .loginarea input,
        button,
        label {
            display: block;
        }

        .loginarea .loginText {
            color: white;
        }

        .loginarea .loginButton:hover {
            color: white;
            border: 1px solid black;
            filter: brightness(0.5);
        }

        .loginarea .loginTextBox:focus {
            outline: none;
            border: 1px solid #295ff3;
        }

        .loginarea .loginLink {
            color: white;
            position: relative;
            margin-top: 50px;
        }

        .registermodal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            min-width: 100%;
            height: 100%;
            max-height: 100%;
            overflow: auto;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .registermodal-header {
            color: white;
            height: auto;
            width: 100%;
            font-size: 24px;
            background-color: #1f1f1f;
            border-bottom: 1px solid black;
        }

        .errormessage {
            display: none;
            margin-top: 10px;
            color: red;
            font-size: 12px;
        }

        .successmessage {
            display: none;
            margin-top: 10px;
            color: green;
            font-size: 12px;
        }

        .registermodal-content {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #262626;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: 30%;
            height: 45%;
            display: table;
        }

        .registermodal-body {
            padding: 5px;
        }

        .registermodal-footer {
            margin-top: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20%;
            padding: 2px 16px;
            background-color: #1f1f1f;
        }

        .registerUser {
            position: absolute;
            display: inline-block;
            margin-top: 10px;
            border-radius: 4px;
            background-color: #295ff3;
            border: #999999;
            color: white;
            text-align: center;
            left: 50%;
            padding: 10px;
            width: 25%;
            transition: all 0.5s;
        }

        .registerUser:hover {
            filter: brightness(0.5);
        }

        .registermodalTextBox {
            margin-top: 25px;
            margin-left: 20%;
            border: 1px solid black;
            position: relative;
            width: 50%;
            height: 50px;
            font-size: 22px;
            border-radius: 8px;
            color: white;
            background-color: #1f1f1f;
        }

        .registermodalTextBox:focus {
            outline: none;
            border: 1px solid #295ff3;
        }

        .registerUserCancel {
            margin-left: 20%;
            margin-top: 10px;
            cursor: pointer;
            margin-bottom: 10px;
            display: inline-block;
            position: absolute;
            border-radius: 8px;
            border: none;
            background-color: rgba(244, 249, 252, 0.651);
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 25%;
            transition: all 0.5s;
        }

        .registerUserCancel:hover {
            text-decoration: underline;
        }

        .message {
            position: absolute;
            left: 450px;
            width: calc(100vw - 800px);
            height: 85%;
            bottom: 75px;
            overflow: auto;
            display: flex;
            flex-flow: column-reverse wrap;
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
            
        }

        .createServer {
            cursor: pointer;
            position: absolute;
            background-color: #333333;
            border-style: solid;
            border-color: #333333;
            background: url(image/plus3.png);
            background-size: cover;
            bottom: 2%;
            height: 75px;
            width: 75px;
            border-radius: 50%;
            left: 0.5%;
        }

        .createServer:hover {
            background-color: white;
            border-radius: 35%;
        }

        .createServer:hover:after {
            position: relative;
            content: "Add a server";
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 120%;
            top: 0;
            z-index: 11;
            background: black;
            display: block;
            color: white;
        }

        .serverArea {
            position: absolute;
            left: 1%;
            width: 8%;
            height: 75%;
            bottom: 10%;
            overflow: auto;
        }

        .serverButton {
            background-image: url(image/ud2.jpeg);
            background-size: cover;
            width: 65px;
            height: 65px;
            transition: all ease 0.3s;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            color: white;
            position: relative;
        }

        .serverButton:hover {
            border-radius: 35%;
        }

        .serverButton:hover:after {
            position: relative;
            content: attr(data-after);
            align-content: center;
            border-radius: 8px;
            width: 500px;
            height: auto;
            left: 120%;
            top: 0;
            z-index: 20;
            background: black;
            display: block;
        }

        .serverButton:focus {
            outline: none;
        }

        .serverButton:active {
            box-shadow: 0 5px #666;
            transform: translateY(10px);
        }

        .memberButton {
            position: relative;
            height: 20px;
            width: 60px;
            left: 50px;
            background-color: #999999;
            border-radius: 5%;
            display: inline-block;
        }

        .notifButton {
            white-space: normal;
            word-wrap: break-word;
            position: relative;
        }

        .userButton {

            width: 95%;
            height: 50px;
            margin-top:5px;
            background: #262626;
            border-style: style;
            border-color: #262626;
            display: inline-block;
            text-align: center;
            border-radius: 8px;
            border: none;
            margin-bottom: 10px;
            cursor: pointer;
            color: white;
            position: relative;
        }

        .userButton::before {

            content: '';
            background-size: cover;
            margin-top: 5px;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: block;
            border-radius: 50%;

        }

        .userButton:after {
            position: absolute;
            content: attr(theUsername-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 62px;
            top: 40%;
            z-index: 11;
            background-color: #333333;
            display: inline;
            color: white;
        }

        .chatMessageButton {
            width: calc(100vw - 800px);
            height: auto;
            background: #333333;
            border-style: style;
            border-color: #333333;
            border-radius: 8px;
            border: none;
            margin-bottom: 10px;
            cursor: pointer;
            color: white;
            position: relative;
            text-align: left;
            justify-content: left;
        }

        .chatMessageButton::before {
             content: '';
            background-size: cover;
            margin-top: 5px;
            margin-right: 15px;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: inline-block;
            border-radius: 50%;
        }

        .chatMessageButton:hover {
            background-color: #262626;
        }

        .chatMessageButton:after {
          position: absolute;
            content: attr(usernameChat-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 62px;
            top: 20%;
            z-index: 0;
            background-color: #333333;
            display: inline;
            color: white;
        }

        .userButtonProfile {
            width: 100%;
            height: 50px;
            background: #262626;
            border-style: style;
            border-color: #262626;
            display: inline-block;
            text-align: center;
            border-bottom: 1px solid black;
            margin-bottom: 10px;
            color: white;
            position: relative;
        }

        .userButtonProfile:before {
            content: '';
            background-size: cover;
            margin-top: 5px;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: block;
            border-radius: 50%;
        }

        .userButtonProfile:after {
            position: absolute;
            content: attr(username-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            font-size: 20px;
            top: 40%;
            left: 15%;
            z-index: 9;
            background: #262626;
            display: block;
            color: white;
        }

        .userButtonProfile:focus {
            outline: none;
        }

        .userButton:hover {
            background-color: #333333;
        }

        .userButton:focus {
            outline: none;
        }

        .profileModalText {
            color: white;
        }

        .profilemodal-body {
            padding: 10px;
            width: 100%;
            height: 35%;
            overflow: auto;
        }

        .profileMutual {
            width: auto;
            height: 60%;
            overflow: auto;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            min-width: 100%;
            height: 100%;
            max-height: 100%;
            overflow: auto;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #868585;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: auto;
            height: 45%;
            display: table;
        }

        .modal-footer {
            margin-top: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20%;
            padding: 2px 16px;
            background-color: rgba(244, 249, 252, 0.651);
        }

        .close {
            color: rgb(9, 12, 9);
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .searchModal-head {
            color: white;
            align-items: center;
            padding: 10px;
            font-size: 20px;
        }

        .profilemodal-content {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #333333;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: 30%;
            height: 45%;
            display: table;
        }

        .reasonmodal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            min-width: 100%;
            height: 100%;
            max-height: 100%;
            overflow: auto;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .reasonmodal-content {
            color: white;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #333333;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: auto;
            height: 30%;
            display: table;
        }

        .reasonmodal-body {
            padding: 10px;
        }

        .reasonmodal-footer {
            margin-top: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 25%;
            background-color: #262626;
        }

        .reasonModalDismiss {
            margin-left: 35%;
            margin-top: 10px;
            margin-bottom: 10px;
            display: inline-block;
            position: absolute;
            border-radius: 8px;
            border: none;
            background-color: rgba(244, 249, 252, 0.651);
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 100px;
            transition: all 0.5s;
        }

        .reasonModalDismiss {
            text-decoration: underline;
        }

        .serverErrorCancel {
            margin-left: 35%;
            margin-top: 10px;
            margin-bottom: 10px;
            display: inline-block;
            position: absolute;
            border-radius: 8px;
            border: none;
            background-color: rgba(244, 249, 252, 0.651);
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 100px;
            transition: all 0.5s;
        }

        .serverErrorCancel:hover {
            text-decoration: underline;
        }

        .blockeddialog {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            min-width: 100%;
            height: 100%;
            max-height: 100%;
            overflow: auto;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .blockeddialog-content {
            color: white;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #333333;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: auto;
            height: 25%;
            display: table;
        }

        .blockeddialog-body {
            padding: 10px;
        }

        .blockeddialog-footer {
            margin-top: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 25%;
            background-color: #262626;
        }

        .blockmodal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            min-width: 100%;
            height: 100%;
            max-height: 100%;
            overflow: auto;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .blockmodal-content {
            color: white;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #333333;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: auto;
            min-height: 30%;
            display: table;
        }

        .blockmodal-body {
            padding: 10px;
        }

        .blockmodal-footer {
            margin-top: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
            min-height: 20%;
            background-color: #262626;
        }

        .modalBlockButton {
            cursor: pointer;
            background: red;
            margin-left: 60%;
            color: white;
            width: 100px;
            transition: all 0.5s;
            position: absolute;
            bottom: 0;
            border: none;
            border-radius: 8px;
            margin-bottom: 10px;
            padding: 10px;
        }

        .modalBlockButton:hover {
            border: 1px solid black;
        }

        .modalBlockCancel {
            cursor: pointer;
            margin-left: 27%;
            margin-bottom: 10px;
            display: inline-block;
            position: absolute;
            bottom: 0;
            border-radius: 8px;
            border: none;
            background-color: rgba(244, 249, 252, 0.651);
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 100px;
            transition: all 0.5s;
        }

        .logoutModalCancel {
            cursor: pointer;
            margin-left: 20%;
            margin-bottom: 10px;
            margin-top: 10px;
            display: inline-block;
            position: absolute;
            bottom: 0;
            border-radius: 8px;
            border: none;
            background-color: rgba(244, 249, 252, 0.651);
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 100px;
            transition: all 0.5s;
        }

        .modalBlockCancel:hover {
            text-decoration: underline;
        }

        .kickmodal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            min-width: 100%;
            height: 100%;
            max-height: 100%;
            overflow: auto;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .kickmodal-content {
            color: white;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            background-color: #333333;
            margin: 15% auto;
            position: relative;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: auto;
            height: 35%;
            display: table;
        }

        .kickmodal-body {
            padding: 10px;
        }

        .kickmodal-footer {
            margin-top: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20%;
            background-color: #262626;
        }

        .kickText {
            margin-left: 10px;
            width: 70%;
            height: 50px;
            font-size: 24;
        }

        .kickTextArea {
            color: white;
            resize: none;
            padding: 10px;
            margin-top: 5px;
            background: #262626;
        }

        .kickTextArea:focus {
            outline: none;
            border: 1px solid;
            border-color: lightskyblue;
        }

        .modalKickButton {
            background: red;
            margin-left: 75%;
            color: white;
            width: 100px;
            transition: all 0.5s;
            position: absolute;
            border: none;
            margin-top: 10px;
            border-radius: 8px;
            padding: 10px;
        }

        .modalKickButton:hover {
            border: 1px solid black;
        }

        .modalKickCancel {
            margin-left: 50%;
            margin-top: 10px;
            display: inline-block;
            position: absolute;
            border-radius: 8px;
            border: none;
            background-color: rgba(244, 249, 252, 0.651);
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 100px;
            transition: all 0.5s;
        }

        .modalKickCancel:hover {
            text-decoration: underline;
        }

        .settingsModal {
            display: none;
            position: fixed;

            left: 0;
            top: 0;
            z-index: 9;
            width: 100%;
            height: 100%;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);

        }

        .settingsModal-header {
            color: white;
            min-height: 25%;
            border-bottom: 1px solid black;
            background-color: #1b1b1b;
        }

        .settingsModal-body {

            position: relative;
            height: auto;
            padding: 10px;


        }

        .settingsModal-content {
            background-color: #1b1b1b;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(19, 57, 224, 0.19);
            border: solid black;
            position: relative;
            margin: 15% auto;
            top: 0;
            left: 0;
            border: 1px solid black;
            right: 30%;
            width: 30%;
            min-height: 45%;
            justify-content: center;
            display: table;
            overflow: auto;

        }

        .settingsModal-footer {
            bottom: 0;
            border-top: 1px solid black;
            position: absolute;
            width: 100%;
            height: 20%;
            background-color: #1b1b1b;
        }

        .settingsModalText {
            color: white;
            font-size: 12px;
        }

        .serverModalText {
            display: flex;
            position: relative;
            justify-content: center;
            margin-bottom: 10px;
            color: black;
        }

        .profile-popup {
            display: none;
            position: fixed;
            top: 0px;
            right: 200px;
            border: 3px solid #262626;
            z-index: 9;
        }

        .profile-container {
            max-width: 300px;
            padding: 20px;
            background-color: black;
        }

        .profile-container .btn {
            background-color: rgb(29, 81, 194);
            right: 0;
            color: white;
            border: none;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .profile-container .useroptionbtn {
            margin-bottom: 5px;
            width: 100%;
            border-color: black;
            background-color: black;
            color: #C2C2C2;
        }

        .profile-container .useroptionbtn:hover {
            background-color: rgb(29, 81, 194);
        }

        .profile-container .userkickbtn {
            margin-bottom: 5px;
            border-color: black;
            background-color: black;
            color: red;
        }

        .profile-container .userkickbtn:hover {
            background-color: rgb(29, 81, 194);
        }

        .textBox {
            height: 30px;
            margin-top: 20x;
            border: #999999;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .launchServerButton {
            position: relative;
            display: inline-block;
            border-radius: 4px;
            margin: auto;
            background-color: #295ff3;
            border: #999999;
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 175px;
            transition: all 0.5s;
        }

        .launchServerButton:hover {
            color: white;
        }

        .modalCancel {
            margin-left: 30px;
            margin-top: 20px;
            display: inline-block;
            position: relative;
            bottom: 0;
            border-radius: 8px;
            border: none;
            background-color: rgba(244, 249, 252, 0.651);
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 100px;
            transition: all 0.5s;
        }

        .modalCancel:hover {
            text-decoration: underline;
        }

        .uploadButton {
            display: inline-block;
            position: relative;
            background-color: #f8f8f8;
            background: url(image/test2.png);
            background-size: cover;
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 175px;
            height: 175px;
            border-radius: 50%;
            transition: all 0.5s;
            margin-bottom: 50px;
        }

        .launchButton {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modalText {
            color: black;
        }

        .previewImage {
            transform: scale(1);
            width: 10vh;
            height: 10vh;
            border-radius: 50%;
        }

        .userProfileButton {
            margin-top: 5px;
            background-image: url(image/ud2.jpeg);
            background-size: cover;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: inline-block;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer;
            color: white;
            position: relative;
        }

        .userProfileButton:after {
            position: relative;
            content: attr(user-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 200%;
            top: 0;
            z-index: 9;
            background: #1f1f1f;
            display: block;
            color: white;
        }

        .userProfileButtton:focus {
            outline: none;
        }

        .userSearch {
            width: 95%;
            height: 50px;
            background: #333333;
            border-style: style;
            border-color: #333333;
            display: inline-block;
            text-align: center;
            border-radius: 8px;
            border: none;
            margin-bottom: 10px;
            cursor: pointer;
            color: white;
            position: relative;
        }

        .userSearch:before {
            content: '';
            background-size: cover;
            margin-top: 5px;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: block;
            border-radius: 50%;
        }

        .userSearch:after {
            position: absolute;
            content: attr(userSearch-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 50px;
            top: 20px;
            z-index: 9;
            background-color: #333333;
            display: block;
            color: white;
        }

        .userSearch:focus {
            outline: none;
            border: 1px solid rgb(60, 150, 60);

        }

        .userSearch:hover {
            filter: brightness(0.5);
        }

        .userProfileButtonBottom {
            background-image: url(image/ud2.jpeg);
            background-size: cover;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-block;
            align-items: center;
            cursor: pointer;
            color: white;
            position: relative;
        }

        .userProfileButtonBottom:after {
            position: relative;
            content: attr(user-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 200%;
            top: 0;
            z-index: 9;
            background: #1f1f1f;
            display: block;
            color: white;
        }

        .userProfileButtonBottom:focus {
            outline: none;
        }

        .theUser {
            display: inline-block;
            position: absolute;
            top: 0;
            left: 0;
        }

        .applyChange {
            border-radius: 4px;
            background-color: #295ff3;
            border: 999999;
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 100px;
            transition: all 0.5s;
        }

        .applyChange:hover {
            color: white;
        }

        .uploadButtonProfile {
            display: inline-block;
            position: relative;
            background-color: #f8f8f8;
            background: url(image/ud2-upload.jpg);
            background-size: cover;
            color: #262626;
            text-align: center;
            padding: 10px;
            width: 75px;
            height: 75px;
            border-radius: 50%;
            transition: all 0.5s;
            margin-top: 10px;
        }

        .uploadButtonProfile:hover {
            color: white;
            background-color: #262626;
        }

        .profileTextBox {
            position: relative;
            margin-top: 1px;
            height: 30px;
            color: white;
            border: none;
            background-color: #262626;
        }

        .profileTextBox:focus {
            outline: none;
            border: 1px solid #295ff3;
        }

        .profileImg {
            width: 25px;
            height: 25px;
            border-radius: 50%;
        }

        .notificationMenuButton {
            position: absolute;
            margin-top: 1px;
            left: 40%;
            top: 0;
            color: black;
            background-size: cover;
            background-color: red;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: inline-block;
        }

        .notificationMenuButton:after {
            position: absolute;
            left: 125%;
            top: 20%;
            z-index: 9;
            content: "Notifications";
            color: white;
            background-color: #1f1f1f;
        }

        .notificationMenuButton:focus {
            outline: none;
        }

        .notification-menu {
            overflow: auto;
            overflow: break-word;
            display: none;
            position: absolute;
            background: #262626;
            border: 1px solid;
            border-color: black;
            text-align: center;
            top: 10%;
            left: 30%;
            width: 20%;
            height: 30%;
            z-index: 9;
        }

        .notificationButton {
            cursor: pointer;
            display: block;
            text-align: center;
            position: relative;
            justify-content: center;
            border: 1px solid black;
            border-radius: 8px;
            width: 90%;
            height: 20%;
            background: #333333;
            margin-left: 5%;
            margin-top: 5px;
            color: white;
        }

        .notificationButton:before {
            content: '';
            background-size: cover;
            margin-top: 5px;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: block;
            border-radius: 50%;
        }

        .notificationButton:hover {
            background-color: #333333;
        }

        .notificationButton:focus {
            outline: none;
        }

        .notificationButton:hover:after {
            content: "Right Click/Click to dismiss/accept";
            width: auto;
            height: auto;
            background: black;
            border-radius: 8px;
            display: block;
            position: relative;
        }

        .inviteServer-menu {
            overflow: auto;
            overflow-wrap: break-word;
            background: black;
            display: none;
            position: fixed;
            width: 20%;
            height: 20%;
            top: 20%;
            right: 19%;
            border: 3px solid #262626;
            z-index: 9;
        }

 .inviteServer-button {
            cursor: pointer;
            display: inline-block;
            text-align: center;
            color: white;
            border: none;
            position: relative;
            width: 100%;
            height: 25%;
            background: black;
        }

        .inviteServer-button:before {
            content: '';
            background-size: cover;
            margin-top: 5px;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: block;
            border-radius: 50%;
        }
        .inviteServer-button:after{
            position: absolute;
            content: attr(servername-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 45px;
            top: 20px;
            z-index: 9;
            background-color:black;
            display: inline;
            color:white; 
        }

        .inviteServer-button:hover {
            background-color: rgb(29, 81, 194);
        }

        .inviteServer-button:focus {
            outline: none;
        }


        .serverListClass {
            color: white;
            text-align: center;
        }

        .nicknameModal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 50%;
            top: 0;
            min-width: 100%;
            height: 100%;
            max-height: 100%;
            overflow: auto;
            background-color: rgba(244, 249, 252, 0.836);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .userList {
            margin-top: 20px;
        }

        .displayServerName {
            color: white;
            position: absolute;
            left: 0;
            margin-top: 10px;
        }

        .directmessaging {
            color: white;
            position: fixed;
            top: 50px;
            margin-top: 20px;
            margin-left: 15px;
            width: 15%;
            height: 80%;
        }

        .directChatButton {
            display: inline-block;
            cursor: pointer;
            color: white;
            margin-top: 10px;
            position: relative;
            width: 90%;
            border-radius: 8px;
            background-color: #262626;
            border: none;

        }

        .directChatButton:before {
            content: '';
            background-size: cover;
            margin-top: 5px;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: block;
            border-radius: 50%;

        }

        .directChatButton:after {
            position: absolute;
            content: attr(directname-after);
            align-content: center;
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 62px;
            top: 40%;
            z-index: 0;
            background-color: #262626;
            display: block;
            color: white;
        }

        .directChatButton:hover {
            background-color: #333333;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: black;
        }

        ::-webkit-scrollbar-thumb {
            background: black;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgb(66, 66, 66);
        }

        .notificationText {
            width: 100%;
            height: 10%;
            background: #1f1f1f;
            padding-top: 5px;
            color: white;
            justify-content: center;
        }

        .notifStatus {
            margin-top: 10%;
            left: 50%;
            top: 50%;
            color: white;
            display: block;
            justify-content: center;
        }

        .bottomArea {
            position: absolute;
            margin-left: 1px;
            bottom: 10px;
            width: 17.4%;
            height: 5%;
            left: 5%;
            background: #1f1f1f;
        }

          .inviteButton:focus {
            outline: none;
        }

        .inviteButton:after {
            position: absolute;
            content: "Invite";
            border-radius: 8px;
            width: auto;
            height: auto;
            left: 45px;
            top: 15px;
            z-index: 11;
            font-size: 14px;
            background: #333333;
            display: block;
            color: white;
        }

       
        .inviteButton {
            margin-top: 5px;
            position: fixed;
            left:10%;
            width: 10%;
            height: 40px;
            background: #333333;
            border-style: style;
            border-color: #333333;
            display: inline-block;
            text-align: center;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            color: white;
            position: relative;
            border:1px solid black;
        }

        .inviteButton::before {
            content: '';
            background:url(image/plus3.png);
            background-size: cover;
            justify-content: left;
            width: 40px;
            height: 40px;
            display: block;
            border-radius: 50%;

        }
    </style>
</head>

<body>
    <div id="loginUI" class="loginUI">

        <form class="loginarea">
            <div class="loginTextLarge">Welcome to CPS490 Messenger! Login to chat.</div><br>
            <h4> For CPS490 - Dr. Phung - Nolan Hollingsworth, Andrew Streng, Roberto Valadez, and Chase Hensley
            <label class="loginText">Username</label>
            <input type="text" id="username" placeholder="" class="loginTextBox" maxlength="18">
            <label class="loginText">Password</label>
            <input type="password" id="password" placeholder="" maxlength="18" class="loginTextBox">
            <button type="button" class="loginButton" onclick="login()">Login</button>
            <br><a href="#" class="loginLink" onclick="showRegistrationModal()">
                Need an account? Register here! </a>
        </form>

    </div>
    <div id="registerModal" class="registermodal">
        <div class="registermodal-content">
            <div class="registermodal-header">
                <div>Sign Up! It's quick and easy.</div>
            </div>
            <div class="registermodal-body">
                <input type="text" class="registermodalTextBox" id="newusername" maxlength="18"placeholder="Choose a username"><br>
                <input type="password" class="registermodalTextBox" id="newpassword"maxlength="18" placeholder="Select a password...">
                <div id="registerError" class="errormessage">Cannot register! User already exists.</div>
                <div id="registerSuccess" class="successmessage">Success! You can log in now.</div>
            </div>
            <div class="registermodal-footer">
                <button type="button" class="registerUserCancel" onclick="closeRegistrationModal()">Close</button>
                <button type="button" class="registerUser" onclick="register()">Register User</button>
            </div>
        </div>
    </div>
    <div style="display:none;" id="registrationScreen"> Register your account:
        <br>
        <input type="text" id="newusername" maxlength="18"placeholder="Enter your email as username ...">
        <input type="password" id="newpassword" maxlength="18"placeholder="Select your password ...">
        <button type="button" onclick="register()">Register User</button>
        <br> <a href="#" onclick="hideRegistrationScreen();showLoginScreen()"> Login? </a>
    </div>
    <div id="discordApp" class="discordApp row" style="display:none">
        <div id="leftSide" class="leftSide">
            <div id="topBar" class="serverName">
                <div id="displayServerName" style="justify-content: left;" class="displayServerName"></div>
                <button type="button" id="inviteButton" class="inviteButton" style="display:none" onclick="searchUsers()"></button>
            
            </div>
            <div id="bottomMenu" class="botArea">
                <div id="theuser" class="theUser"></div>
                <button type="button" class="notificationMenuButton" onclick="showNotificationMenu()"></button>
            </div>
            <div id="server" class="serverSelector">
                <div id="servers">
                    <br> </div>
                <div id="createserver">
                    <br>
                    <button type="button" class="createServer" onclick="newServer()"></button>
                </div>
                <div id="notifications"></div>
            </div>
            <div id="leftarea" class="directMessagesDiv">
                <div id="directmessages" class="directmessaging">
                    <div>Direct Messages</div>
                    <!-- <button onclick="HelpFunction()" type="button" class="helpbutton">Help</button> -->
                    <!-- <div id="Help" style="display: none;">Right click the person that you wish to chat with and select
                        message user</div> -->
                    <!-- <button type="button" class="launchServerButton" onclick="searchUsers()">Search Users</button> -->
                    <div id="directMessages" class="directChat"> </div>
                </div>
            </div>
            <div class="notification-menu" id="notificationForm">
                <div class="notificationText">Your Notifications</div>
                <div id="notification" class="Notification"></div>
                <div id="notificationStatus" class="notifStatus">You're all caught up</div>
            </div>
            <div class="inviteServer-menu" id="inviteServerForm">
                <div id="serverList" class="serverListClass"> </div>
            </div>
            <div class="profile-popup" id="profileForm">
                <form class="profile-container">
                    <div style="justify-content: left;">
                        <button type="button" class="useroptionbtn" onclick="showuserProfile()">Profile</button>
                    </div>
                    <div style="justify-content: left;">
                        <button type="button" id="messageUser" onclick="startDirectMessage()"
                            class="useroptionbtn">Message User</button>
                    </div>
                    <div style="justify-content: left;">
                        <button type="button" id="inviteToServer" class="useroptionbtn"
                            onmouseover="showServerInvite()">Invite to Server</button>
                    </div>
                    <div style="justify-content: left;">
                        <button type="button" id="blockButton" onclick="blockUser()"
                            class="useroptionbtn">Block</button>
                    </div>
                    <div style="justify-content: left;">
                        <button type="button" id="kickUser" onclick="showKickModal()" class="userkickbtn">Kick</button>
                    </div>
                </form>
            </div>
            <div id="kickModal" class="kickmodal">
                <div class="kickmodal-content">
                    <div class="kickmodal-body">
                        <div id="kickUsername"></div>
                        <br>
                        <div>Are you sure you want to kick this user? They can rejoin</div>
                        <br>
                        <br>
                        <div>Reason For Kick</div>
                        <textarea id="kickReason" class="kickTextArea" name="kickTextBox" rows="3" cols="40"
                            maxlength="100"></textarea>
                    </div>
                    <div class="kickmodal-footer">
                        <button type="button" class="modalKickButton" data-dismiss="modal"
                            onclick="kickUser()">Kick</button>
                        <button type="button" class="reasonModalDismiss" onclick="hideKicKModal()"
                            data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
            <div id="serverError" class="kickmodal">
                <div class="kickmodal-content">
                    <div class="kickmodal-body">
                        <div>Server Generation error</div>
                        <br>
                        <div>Server already exists! Please choose another name.</div>
                        <br>
                        <br>
                    </div>
                    <div class="kickmodal-footer">
                        <button type="button" class="serverErrorCancel" onclick="hideServerError()"
                            data-dismiss="modal">Dismiss</button>
                    </div>
                </div>
            </div>
            <div id="blockModal" class="blockmodal">
                <div class="blockmodal-content">
                    <div class="blockmodal-body">
                        <div id="blockUsername"></div>
                        <br>
                        <div>Are you sure you want to block this user?</div>
                    </div>
                    <div class="blockmodal-footer">
                        <button type="button" class="modalBlockButton" data-dismiss="modal"
                            onclick="blocktheUser()">Block</button>
                        <button type="button" class="modalBlockCancel" data-dismiss="modal"
                            onclick="hideBlockModal()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="kickReasonModal" class="reasonmodal">
            <div class="reasonmodal-content">
                <div class="reasonmodal-body">
                    <div>Reason For Kick</div>
                    <textarea id="kickReasonShow" class="kickTextArea" name="kickTextBox2" rows="3" cols="40"
                        maxlength="100" readonly></textarea>
                    <!-- <input type="text" class="kickText" id="kickReason"> -->
                </div>
                <div class="reasonmodal-footer">
                    <button type="button" class="reasonModalDismiss" onclick="hideKickReasonModal()"
                        data-dismiss="modal">Dismiss</button>
                </div>
            </div>
        </div>
        <div id="blockedDialog" class="blockeddialog">
            <div class="blockeddialog-content">
                <div class="blockeddialog-body">
                    <div>You are currently blocked by this user</div>
                </div>
                <div class="blockeddialog-footer">
                    <button type="button" class="reasonModalDismiss" onclick="hideblockedDialog()"
                        data-dismiss="modal">Dismiss</button>
                </div>
            </div>
        </div>
        <div id="profileSettings" class="settingsModal">
            <div class="settingsModal-content">
                <div id="area" class="settings-area"> </div>
                <div class="settingsModal-header"> MY ACCOUNT
                    <div id="userProfileUsername"></div> <span class="close">&times;</span> </div>
                <div class="settingsModal-body">
                    <label class="settingsModalText">Choose new Profile Image</label>
                    <!-- <form action="/upload" id="uploadForm2" method="post" enctype="multipart/form-data"> -->
                        <div>
                            <input type="file" accept="image/*" name="image" id="file" onchange="loadProfileFile(event)"
                                style="display: none;"> </div>
                        <div style="text-align: left;">
                            <label for="file" class="uploadButtonProfile" style="cursor: pointer;"></label>
                            <br> </div>
                        <br>
                        <div style="text-align: left;"><img id="profileImage" class="previewImage" width="50"
                                style="display:none" ; /></div>
                        <label class="settingsModalText">Choose new Username</label>
                        <div style="text-align: left;">
                            <input type="text" class="profileTextBox" id="profileText" placeholder="" maxlength="18">
                        </div>
                </div>
                <div class="settingsModal-footer">
                    <button type="button" class="modalCancel" onclick="hideProfileModal()"
                        data-dismiss="modal">Cancel</button>
                    <button type="submit" class="launchServerButton" onclick="applyChanges()">Apply Changes</button>
                    <!-- </form> -->
                </div>
            </div>
        </div>
        <div id="profileModal" class="modal">
            <div class="profilemodal-content">
                <div class="modal-head" id="profileInformation"> </div>
                <div class="profileModalText" style="justify-content: left;">Mutual Servers
                    <br> </div>
                <div id="toggleMutual" class="profileModalText" style="justify-content: left; display:none;">No common
                    servers with this user
                    <br> </div>
                <div id="mutualServers" class="profileMutual"> </div>
            </div>
        </div>
        <div id="searchModal" class="modal">
            <div class="searchModal-content">
                <div class="searchModal-body">
                    <div class="searchModal-head">
                        Invite a User to your Server<br>
                        <div class="searchModal-text">*Invited User(s) are highlighted</div>

                    </div>
                    <div class="searchModal-list">
                        <div id="users"></div>
                    </div>
                </div>
                <div class="searchModal-footer">
                    <button type="button" class="searchModal-button">Done</button>
                </div>
            </div>
        </div>
        <div id="logoutModal" class="blockmodal">
            <div class="blockmodal-content">
                <div class="blockmodal-header"> Logout </div>
                <div class="blockmodal-body"> Are you sure you want to logout? </div>
                <div class="blockmodal-footer">
                    <button type="button" class="modalBlockButton" data-dismiss="modal"
                        onclick="disconnect()">Logout</button>
                    <button type="button" class="logoutModalCancel" data-dismiss="modal"
                        onclick="hidelogoutModal()">Cancel</button>
                </div>
            </div>
        </div>
        <div id="serverModal" class="modal">
            <div class="modal-content">
                <div class="modal-header"> </div>
                <div class="modal-dialog modal-xl"></div>
                <div style="text-align: center;" class="modalText">Create a New Server
                    <br> </div>
                <div style="text-align: center;" class="modalText"> Give server a name and upload image from your
                    device.
                    <br> </div>
                <div style="text-align: center;" class="modalText">Server Name</div>
                <div style="text-align: center;">
                    <input type="text" class="textBox"maxlength="18" id="serverText" name="serverTextBox" required=""
                        placeholder="enter server"> </div>
                <!-- <form action="/upload" id="uploadForm" method="post" enctype="multipart/form-data"> -->
                    <div>
                        <input type="file" accept="image/*" name="image" id="file1" onchange="loadFile(event)"
                            style="display: none;"> </div>
                    <div style="text-align: center;">
                        <label for="file1" class="uploadButton" style="cursor: pointer;"></label>
                        <br> </div>
                    <br>
                    <div style="text-align: center;"><img id="serverimage" class="previewImage" width="75"
                            style="display:none;" /></div>
                    <div class="modal-footer">
                        <button type="button" class="modalCancel" onclick="hideServerModal()"
                            data-dismiss="modal">Cancel</button>
                        <button type="submit" id="submitBtn" class="launchServerButton" onclick="launchServer()"
                            data-dismiss="modal">Create</button>
                <!-- </form> -->
            </div>
        </div>
    </div>
    <div id="middleChat" class="middleArea">
        <div id="chat" class="chat">
            <div id="chatInner">
                <div id="messagessend" class="messagessend">
                    <input type="text" class="inputsend" id="message" onkeyup="sendTyping()"
                        onkeypress="searchKeyPress(event)" required="" placeholder="Send a message..."> </div>
                <div id="messageDisplay" class="message">
                    <div id="publicChat">
                        <div id="messages" class="theMessage"> </div>
                        <div id="typing"></div>
                    </div>
                    <div id="privateUI" style="display: none">
                        <div id="privatechat"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="memberList" class="rightColumn">
        <div id="disconnect" style="display:none">
            <!-- <button type="button" class="disconnect" onclick="showlogoutModal()">Log out</button> -->
        </div>
        <div id="successLogin" style="display: none"> </div>
        <div id="userPrint" style="display: none">
            <br> </div>
        <div id="userList" class="userList" style="display: none">
            <br> </div>
        <div id="privateUI" style="display:none">
            <div id="privatemembers"> </div>
        </div>
    </div>
    </div>
</body>

</html>